---
import "../styles/global.css";
---

<!-- Animation for preloader based on this pen: https://codepen.io/KaioRocha/pen/YoEVvZ -->

<script>
    document.addEventListener("DOMContentLoaded", () => {
        setTimeout(() => {
            document.querySelector(".preloader")!.classList.add("hidden");
            document.body.classList.add("loaded"); // Add class to trigger content loading
        }, 5000);
    });
</script> 

<div class="preloader">
    <div class="container">
        <div class="box">
            <div class="title">
                <span class="block"></span>
                <h1>Asahi Kuroki<span></span></h1>
            </div>

            <div class="role">
                <div class="block"></div>
                <p>Software Developer</p>
            </div>
        </div>
    </div>
</div>

<style lang="scss">
    @use "../styles/variables.scss" as variables;
    @use "../styles/breakpoints.scss" as breakpoints;
    .preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: variables.$background-color-odd;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 110;
        transition: opacity 1s ease-in-out;
    }

    .preloader.hidden {
        opacity: 0;
        visibility: hidden;
    }

    .container {
        width: 100%;
        height: 100vh;
        background: variables.$background-color-odd;

        display: flex;
        justify-content: center;
        align-items: center;

        .box {
            height: fit-content;
            position: relative;
            display: flex;
            justify-content: center;
            flex-direction: column;

            .title {
                width: 100%;
                position: relative;
                display: flex;
                align-items: center;
                height: 50px;

                .block {
                    width: 0%;
                    height: inherit;
                    background: #ffb510;
                    position: absolute;
                    animation: mainBlock 2s cubic-bezier(0.74, 0.06, 0.4, 0.92)
                        forwards;
                    display: flex;
                }

                h1 {
                    font-family: "Poppins";
                    color: variables.$primary-color;
                    font-size: 40px;
                    -webkit-animation: mainFadeIn 2s forwards;
                    -o-animation: mainFadeIn 2s forwards;
                    animation: mainFadeIn 2s forwards;
                    animation-delay: 1.6s;
                    opacity: 0;
                    display: flex;
                    align-items: baseline;
                    position: relative;

                    span {
                        width: 0px;
                        height: 0px;
                        -webkit-border-radius: 50%;
                        -moz-border-radius: 50%;
                        border-radius: 50%;

                        background: #ffb510;
                        -webkit-animation: load 0.6s
                            cubic-bezier(0.74, 0.06, 0.4, 0.92) forwards;
                        animation: popIn 0.8s
                            cubic-bezier(0.74, 0.06, 0.4, 0.92) forwards;
                        animation-delay: 2s;
                        margin-left: 5px;
                        margin-top: -10px;
                        position: absolute;
                        bottom: 13px;
                        right: -12px;
                    }
                }
            }

            .role {
                width: 100%;
                position: relative;
                display: flex;
                align-items: center;
                height: 50px;
                margin-top: -10px;

                .block {
                    width: 0%;
                    height: inherit;
                    background: #e91e63;
                    position: absolute;
                    animation: secBlock 2s cubic-bezier(0.74, 0.06, 0.4, 0.92)
                        forwards;
                    animation-delay: 2s;
                    display: flex;
                }

                p {
                    animation: secFadeIn 2s forwards;
                    animation-delay: 3.2s;
                    opacity: 0;
                    font-weight: 800;
                    font-family: "Lato";
                    color: variables.$secondary-color;
                    font-size: 15px;
                    text-transform: uppercase;
                    letter-spacing: 5px;
                }
            }
        }
    }

    @keyframes mainBlock {
        0% {
            width: 0%;
            left: 0;
        }
        50% {
            width: 100%;
            left: 0;
        }
        100% {
            width: 0;
            left: 100%;
        }
    }

    @keyframes secBlock {
        0% {
            width: 0%;
            left: 0;
        }
        50% {
            width: 100%;
            left: 0;
        }
        100% {
            width: 0;
            left: 100%;
        }
    }

    @keyframes mainFadeIn {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
    }

    @keyframes popIn {
        0% {
            width: 0px;
            height: 0px;
            background: #e9d856;
            border: 0px solid #ddd;
            opacity: 0;
        }
        50% {
            width: 10px;
            height: 10px;
            background: #e9d856;
            opacity: 1;
            bottom: 45px;
        }
        65% {
            width: 7px;
            height: 7px;
            bottom: 0px;
            width: 15px;
        }
        80% {
            width: 10px;
            height: 10px;
            bottom: 20px;
        }
        100% {
            width: 7px;
            height: 7px;
            background: #e9d856;
            border: 0px solid #222;
            bottom: 13px;
        }
    }

    @keyframes secFadeIn {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 0.5;
        }
    }
</style>
